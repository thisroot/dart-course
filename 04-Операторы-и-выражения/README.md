# Операторы и выражения

## Что такое оператор?

- Оператор это символ который представляется как **вид операции над данными** в процессе выполнения
  - Требует **один или больше аргументов** (операндов)
  - Вычисляет **новое значение**
- **Операторы имеют приоритет**
- Выражения представляют собой последовательности операндов и операторов которые вычисляют определенное значение

## Операторы в JavaScript

- Бывают:
  - **Унарные** – требует один операнд
  - **Битовые** – требует два операнда
  - **Тернарные** (`?:`) – требует три операнда
- За исключением операторов присваивания, все операторы лево-ассоциативные
- Операторы присваивания и условный оператор являются право-ассоциативными

| Категория      | Операторы                                                                     |
| :------------- | :---------------------------------------------------------------------------- |
| Арифметические | `+` `-` `*` `/` `%` `++` `--` `~`                                             |
| Логические     | `&&` <code>&#124;&#124;</code> `^` `!`                                        |
| Битовые        | `&` <code>&#124;</code> `^` `~` `<<` `>>` `>>>`                               |
| Сравнения      | `==` `!=` `<` `>` `<=` `>=` `===` `!==` `as` `is` `is!`                       |
| Присваивания   | `=` `+=` `-=` `*=` `/=` `%=` <code>&#124;=</code> `^=` `<<=` `>>=` `~/` `??=` |
| Конкатенации   | `+`                                                                           |
| Другие         | `.` `[]` `()` `?:` `..`                                                       |

## Арифметические операторы

| Категория      | Операторы                         |
| :------------- | :-------------------------------- |
| Арифметические | `+` `-` `*` `/` `%` `++` `--` `~` |

```dart
print(2 + 3 == 5);
print(2 - 3 == -1);
print(2 * 3 == 6);
print(5 / 2 == 2.5); // Результат число double
print(5 ~/ 2 == 2); // Результат int
print(5 % 2 == 1);

print('5/2 = ${5 ~/ 2} r ${5 % 2}' == '5/2 = 2 r 1');
```

- Кроме того `Dart` поддерживает префиксные и постфиксные операторы инкремента и декримента

```dart
    var a, b;

    a = 0;
    b = ++a; // инкрементирует a прежде чем b получит свое значение.
    print(a == b); // 1 == 1

    a = 0;
    b = a++; // инкрементирует a после того как b получит свое значение.
    print(a != b); // 1 != 0

    a = 0;
    b = --a; // декрементирует a прежде чем b получит свое значение.
    print(a == b); // -1 == -1

    a = 0;
    b = a--; // декрементирует a после того как b получит свое значение.
    print(a != b); // -1 != 0
```

# Операторы сравнения

| Категория | Операторы                                               |
| :-------- | :------------------------------------------------------ |
| Сравнения | `==` `!=` `<` `>` `<=` `>=` `===` `!==` `as` `is` `is!` |

- Применяются для сравнения переменных
- Если Вам требуется установить являются ли значения экземплярами одного и того же объекта то стоит использовать функцию `identical()`
- Кроме того у Вас есть возможность переопределить стандартные операторы

```dart
    var a = 5;
    var b = 4;

    print(a >= b);   // True
    print(a != b);   // True
    print(a == b);   // False
    print(0 == '');  // True
    print(0 === ''); // False
```

- Кроме того мы можем проверять типы в моменте исполнения

```dart
    if (emp is Person) {
        emp.firstName = 'Bob';
    }

    //можно сделать это выражение меньше

    (emp as Person).firstName = 'Bob';
```

# Логические операторы

| Категория  | Операторы                              |
| :--------- | :------------------------------------- |
| Логические | `&&` <code>&#124;&#124;</code> `^` `!` |

- Принимают булевы значения и возвращают булевы значения

```dart
    var a = true;
    var b = false;

    print(a && b); // False
    print(a || b); // True
    print(!b); // True
    print(b || true); // True
    print(b && true); // False
    print(a || true); // True
    print(a && true); // True
    print(!a); // False
```

### Операторы присваивания

| Категория    | Операторы                                                                     |
| :----------- | :---------------------------------------------------------------------------- |
| Присваивания | `=` `+=` `-=` `*=` `/=` `%=` <code>&#124;=</code> `^=` `<<=` `>>=` `~/` `??=` |

- присваивают знаение переменной

```dart
    a = value
    b ??=value //присваивает значение b если b явлется пустой переменной (null)
    var a = 2; // присваивание =
    a *= 3; // присваивание текущей переменной: a = a * 3
    print(a == 6);
```

## Битовые операторы

| Категория | Операторы                                       |
| :-------- | :---------------------------------------------- |
| Битовые   | `&` <code>&#124;</code> `^` `~` `<<` `>>` `>>>` |

- Битовые операторы используют числовые значения. Они применяются побитово.
- Оператор `~` переводит `0` к `1` и `1` к `0`
  - Подобно `!` как в булевах применяется побитово
- Операторы `|`, `&` и `^` так же как и `||`, `&&` и `^` в булевах только побитово
- `<<` и `>>` сдвигают (перемещают) биты в лево или вправо

## Выражения

- Выражения это последовательности операторов, литералов и переменных, которые возвращают результат вычислений
- Можно использовать тернарное выражение `<условие>?<выражение1>:<выражение2>`
- `<выражение1> ?? <выражение2>` - если выражение 1 не является `null` то возвращается оно, в противном случае возвращается второе выражение

```dart
    var visibility = isPublic ? 'public' : 'private';

    String playerName(String name) => name ?? 'Guest';
```

## Каскады (..)

Каскады позволяют производить последовательные операции над одним объектом. В каждом последующем вызове функции, вы все равно получаете доступ к одному и тому же объекту. Это часто позволяет сократить количество строк кода

```dart
    querySelector('#confirm') // Get an object.
    ..text = 'Confirm' // Use its members.
    ..classes.add('important')
    ..onClick.listen((e) => window.alert('Confirmed!'));

    //то же но уже без каскадов
    var button = querySelector('#confirm');
    button.text = 'Confirm';
    button.classes.add('important');
    button.onClick.listen((e) => window.alert('Confirmed!'));
```

Вы так же можете делать каскады вложеннными

```dart
    final addressBook = (AddressBookBuilder()
        ..name = 'jenny'
        ..email = 'jenny@example.com'
        ..phone = (PhoneNumberBuilder()
                ..number = '415-555-0100'
                ..label = 'home')
            .build())
        .build();
```

- Для того чтобы использовать каскады вызовов, функции, которые их порождают не должны возвращать `void`
